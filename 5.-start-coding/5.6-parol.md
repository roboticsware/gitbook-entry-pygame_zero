# 5.6 Xazina sandiqini ochish uchun parolni kiriting - Kiritish/Chiqarish

Biz o'tgan boblarda sichqoncha kiritish (sudrash, bosish va hokazo) bilan yetarlicha tanishib chiqdik. Ushbu bobda, nomidan ko'rinib turibdiki, birinchi marta klaviatura kiritilishini ko'rib chiqamiz va o'yinni yanada qiziqarli qilish uchun tovushli fayllar orqali qanday qilib ovoz chiqarishni o'rganamiz.

Siz oldingi 5 ta misolni bajarganingiz uchun endi sizni Pygame Zero dasturida mutlaqo yangi boshlovchi deb bo'lmaydi. Endi qolgan 2 ta misolni kodning oxiridagi izohni darhol ko'rishdan ko'ra, toâ€˜liq kodni bir qarashda tushunishga harakat qiling. Shundan so'ng, pastdagi kod izohlarini ko'rish tartibida davom etishga harakat qilamiz. Kelgusida ham bunday o'qish sizning ko'nikmalaringizni oshirish yo'li bo'ladi. Sizlar ham tajribangizdan yaxshi bilasizki, tez javoblar hech qachon bizning fikrlash qobiliyatimizni rivojlantirishga imkon bermaydi.

{% code lineNumbers="true" %}
```python
from pgzhelper import *

WIDTH = 960
HEIGHT = 540

xazina = Actor("treasure_box", (WIDTH / 2, HEIGHT / 2))
xazina.images = ["treasure_box", "treasure_box_o"]

input_text = ""
input_done = False
input_rect = Rect(350, 450, 200, 50)

guide_rect = Rect(300, 50, 400, 50)
parol = "1234"

def draw():
    screen.blit("desert", (0, 0))
    xazina.draw()

    # Guide textbox
    screen.draw.filled_rect(guide_rect, 'black')
    if input_done:
        if input_text == parol:
            screen.draw.textbox("Xazina sizniki!", guide_rect)
        else:
            screen.draw.textbox("Parol noto'g'ri!", guide_rect)

        pygame.display.update()
        game.exit()
    else:
        screen.draw.textbox("Iltimos, parolni kiriting.", guide_rect)

    # Input textbox
    screen.draw.filled_rect(input_rect, "pink")
    screen.draw.textbox(input_text, input_rect)


def update():
    if input_done:
        if input_text == parol:
            xazina.sel_image("treasure_box_o")
            sounds.cheer.play()
        else:
            sounds.warning.play()


def on_key_down(key, unicode):
    global input_text, input_done

    if key == keys.RETURN:
        input_done = True
    elif key == keys.BACKSPACE:
        input_text = input_text[:-1]
    else:
        input_text += unicode
```
{% endcode %}

ðŸ”¢ Keling, avval ushbu kodda bir necha marta ishlatilgan Rect haqida bilib olaylik. Nomining bosh harf bilan boshlanishidan, Rect obyekt ekanini bilib olish mumkin. Rect - bu Rectangle (to'rtburchak) so'zining qisqartmasi va u to'rtburchak shaklidagi maydonni ushlab turuvchi obyekt bo'lib, o'yin sahnasida paydo bo'ladigan ko'pchilik obyektlar asosan to'rtburchak shaklida bo'lgani uchun Rect ishlatish keng tarqalgan. Uni yaratish uchun 4 ta qiymat (left, top, width, height) kerak bo'ladi. Birinchi ikkita qiymat (left, top) - bu to'rtburchakning ekranda qayerdan boshlanishini ko'rsatuvchi yuqori chap burchak koordinatalari, oxirgi ikkita qiymat (width, height) esa to'rtburchakning kengligi va balandligi bo'lib, ular bu maydonning oâ€˜lchamini belgilaydi.

<figure><img src="../.gitbook/assets/image (3).avif" alt="" width="375"><figcaption></figcaption></figure>

Biz ushbu misolni avvaloq Entry orqali yaratganmiz, shuning uchun bu misolda foydalanuvchi bilan matn orqali o'zaro aloqada bo'lishini bilamiz. Xazina sandig'ini ochish uchun foydalanuvchiga parolni kiritish taklif etiladi, va kiritilgan parol to'g'ri yoki noto'g'riligiga qarab, xazinani olganmi yoki muvaffaqiyatsizlikka uchraganligini matn va ovoz orqali ko'rsatiladi. Shunday qilib, bizga ushbu misolda ikkita Rect kerak boâ€˜ladi: biri foydalanuvchidan parolni kiritishni qabul qiladigan input\_rect maydoni, ikkinchisi esa foydalanuvchiga qandaydir harakatlarni ko'rsatadigan yoki natijalarni ko'rsatuvchi guide\_rect maydoni.

ðŸ”¢ 9-qatordagi **input\_done** o'zgaruvchisi flag (bayroq) o'zgaruvchisi bo'lib, pastdagi eslatmalarda aytilgan. U True (rost) yoki False (yolg'on) qiymatlaridan birini qabul qiladi.

{% hint style="info" %}
Flag o'zgaruvchisi: dasturlashda kodlar orasidagi holatni ko'rsatish uchun ishlatiladigan True yoki False yoki 0 yoki 1 (boolean) ikkilik qiymatiga ega o'zgaruvchi.

Malumot: Wikipedia ([https://en.wikipedia.org/wiki/Flag\_(programming)](https://en.wikipedia.org/wiki/Flag\_\(programming\)) )
{% endhint %}

Aslida flag (bayroq) o'zgaruvchisi birinchi marta paydo bo'layotgani yo'q, u 5.3-bo'limdagi misollardan boshlab doim ishlatilgan. Uni asosan kiritish qurilmalari, masalan, sichqoncha va klaviatura yordamida kiritish tugagan paytni aniqlash uchun ishlatishadi. Qachon input\_done True (rost) qiymatiga ega bo'ladi? Bu ma'lumot 51-qatorda saqlanadi, parol raqamlari kiritilgandan so'ng Enter tugmasi bosilib, parol kiritish tugaganida **draw** funksiyasida 23-qatorda input\_done qiymati True bo'lganda parol toâ€˜gâ€˜ri yoki notoâ€˜gâ€˜ri kiritilgani aniqlanadi.

Flag o'zgaruvchilarni ko'p ishlatadigan dasturlash uslubi odatda tavsiya etilmaydi. Flaglarni ko'paytirish kodni murakkablashtiradi va texnik xizmat ko'rsatishni qiyinlashtiradi. Biroq, Pygame Zero kabi katta o'yin takrolashlari (loop) va qayta chaqirish (callback) funksiyalari ishlatiladigan tuzilmalarda ularni ishlatish muqarrar ekanligini tushunish kerak.

ðŸ”¢ Endi 19-qatordagi **screen.draw.textbox** metodini (usulini) ko'rib chiqamiz. U avvalgi bobda ko'rilgan **screen.draw.text** metodidan unchalik farq qilmaydi. Bu metodlarni solishtirish foydali bo'ladi: matnni chiqarish uchun **Rect** maydonidan foydalanilgan. **draw** metodida faqat matn chiqariladigan joy ko'rsatilgan bo'lsa, **textbox** metodida chiqarish maydoni aniqlangan. Rect orqali matnni maksimal kattalikda, lekin ko'rsatilgan maydondasn oshib ketmasdan chiqarish mumkin.

Matn chiqariladigan maydonning kattaligi aniq bo'lishi bizning maqsadimizga mos keladi, chunki matn mazmuni doimiy o'zgarib turadi. Bunday holda, yangi matn yozishdan oldin, 18 va 24-qatorlarda koâ€˜rsatilganidek, eski matnni o'chirish osonroq bo'ladi. Agar maydon o'zgaruvchan bo'lsa, uni doim eslab va nazorat qilib turish noqulaylik tug'diradi.

Matnni chiqarish uchun ishlatiladigan shrift **fontname='nanum\_square'** parametri orqali ko'rsatilgan. 5.1-boâ€˜limda aytib oâ€˜tilganidek, masalan, koreyscha matnni toâ€˜gâ€˜ri koâ€˜rsatish uchun koreys shriftidan foydalanish kerak. Matnni turli shakllarda oâ€˜zgartirish uchun boshqa parametrlar ham mavjud, ular haqida batafsil maâ€™lumotni [kutubxona qoâ€˜llanmasi](https://pygame-zero.readthedocs.io/en/stable/ptext.html)dan olishingiz mumkin.

ðŸ”¢ O'yinda ovoz effektlaridan foydalanish deyarli majburiy hisoblanadi. Ularni ishlatish qiyin emas: 28 va 31-qatorlardagi kabi, **sounds.sound\_file\_name.play** metodini chaqirish kifoya. Ovoz ham o'yinda ishlatiladigan resurslar qatoriga kiradi (rasm, shrift va boshqalar) va ular oldindan **sounds** papkasiga saqlangan boâ€˜lishi kerak. **Faqat wav va ogg formatlarigina qo'llab-quvvatlanadi.**

Ovozlarni ikkiga bo'lish mumkin: maxsus voqealar uchun effektlar va oâ€˜yin davomida ijro etiladigan fon musiqasi. Fon musiqasini ijro etish uchun Pygame Zero kutubxonasida Music obyekti mavjud. Tafsilotlar uchun [kutubxona qoâ€˜llanmasi](https://pygame-zero.readthedocs.io/en/stable/builtins.html#music)ga murojaat qilishingiz mumkin.

ðŸ”¢ Nihoyat, 36-qatordagi har safar klaviatura tugmasi bosilganda ishlaydigan **on\_key\_down** qayta chaqirish (callback) funksiyasini ko'rib chiqamiz. Klaviatura tugmachasi bosilganida, key va unicode qiymatlari uzatiladi. Key qaysi tugma bosilganligini aniqlash uchun ishlatiladi, unicode esa maxsus tugma emas (ctrl, shift, esc), balki harf yoki raqam bo'lsa, bu qiymatni oladi. 44-qatordagi **input\_text += unicode** kodi klaviaturada bosilgan qiymatni **input\_text** o'zgaruvchisiga qo'shib boradi.

Agar foydalanuvchi parolni notoâ€˜gâ€˜ri kiritgan boâ€˜lsa, u **Backspace** tugmasini bosib oâ€˜chira oladi. Bu 41-42-qatorlarda amalga oshirilgan. 42-qatordagi **input\_text\[:-1]** sintaksisi Python tilining qulay **slicing** (kesish) metodlaridan biri bo'lib, boshqa tillarda bu odatda mavjud emas. -1 qiymati **input\_text** ning oxirgi belgisi tashlab yuborilishini bildiradi va shu tariqa oxirgi belgi oâ€˜chiriladi. Slicing juda foydali bo'lsada, bu mavzu ancha uzunlashib ketdi, shuning uchun yaxshisi internetdagi yaxshi manbalarni o'rganishni tavsiya qilamiz.

6-misolning natijasini tekshirib chiqqanimizdan soâ€˜ng, kitobning soâ€˜nggi, 7-misoliga oâ€˜tamiz.

<figure><img src="../.gitbook/assets/PassChess.gif" alt=""><figcaption></figcaption></figure>
